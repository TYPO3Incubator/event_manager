# TYPO3 Backned App Configuration of EventApp
---
app:
  package: 'TYPO3Incubator/EventManager'
  name: 'EventApp'
  title: 'LLL:EXT:event_manager/Resources/Private/Language/EventApp.xlf:title'
  labelFile: 'LLL:EXT:event_manager/Resources/Private/Language/EventApp.xlf'
  iconFile: 'EXT:event_manager/Resources/Public/Icons/EventApp.svg'
  #parentModule: "apps"
  templateFile: 'EXT:app_engine/Resources/Private/Templates/Apps/Layout.html'
  extends: 'TYPO3Incubator/AppEngine/BaseApp'

components:
  headerMenu:
    settings:
      showAppSettings: true
      appSettingsTemplateFile: 'EXT:event_manager/Resources/Private/Partials/Apps/EventApp/Settings.html'
      showHelp: true
      helpTemplateFile: 'EXT:event_manager/Resources/Private/Partials/Apps/EventApp/Help.html'

  # or topGroup: false
  topGroup:
      settings:
        collapseAll: true
      components:
        -
          component: 'customOverview'
          settings:
            templateFile: 'EXT:event_manager/Resources/Private/Partials/Apps/EventApp/Custom.html'
            controller: 'AndreasSteiger\\EventManager\\AppController\\CustomOverviewController'
            action: 'index'
        -
          component: 'presets'
          settings:
            # See TCA... possibly...
            selectors:
              category:
                label: 'EXT:event_manager/Resources/Private/Language/EventApp.xlf:presets.category'
                fields:
                  - 'tx_eventmanager_domain_model_event.categories'
                type: 'select'
              band:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:perspectives.band'
                fields:
                  - 'tx_eventmanager_domain_model_event.band'
                type: 'select'
              year:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:perspectives.year'
                provider: 'AndreasSteiger\\EventManager\\AppController\\DataProvider->getEventYears'
                type: 'select'

  asideGroup:
    settings:
      defaultWidth: '30%'
    components:
      -
        component: 'customOverview'
        settings:
          templateFile: 'EXT:event_manager/Resources/Private/Partials/Apps/EventApp/CustomAside.html'
          controller: 'AndreasSteiger\\EventManager\\AppController\\CustomOverviewController'
          action: 'index'
      -
        component: 'tree'

  filter:
    settings:
      pageFilter: true
      inputField:
        allowSearchInColumn:
          - title
          - band
          - date
          - participant
        defaultSearchInColumn:
          - title
          - band
          - participant
      smartFilter:
          eventDate:
            multipleSelect: true
            label: 'EXT:event_manager/Resources/Language/EventApp.xlf:filter.date'
            type: 'date'
            interceptor: 'AndreasSteiger\\EventManager\\AppConstraints\\Constraint->addMonthConstraint'
            addConstraints:
              lastMonth:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:filter.month.last'
                type: 'dynamic'
                provider: 'AndreasSteiger\\EventManager\\AppController\\DataProvider->getLastMonth'
              lastTwoMonths:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:filter.month.lasttwomonths'
                type: 'dynamic'
                provider: 'AndreasSteiger\\EventManager\\AppController\\DataProvider->getLastTwoMonths'
              day:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:filter.day'
                type: 'input'
                widget: 'datepicker'
                provider: ''
              period:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:filter.period'
                type: 'input'
                widget: 'rangeSlider'
                provider: ''
          state:
            multipleSelect: false
            label: 'EXT:event_manager/Resources/Language/EventApp.xlf:filter.date'
            interceptor: 'AndreasSteiger\\EventManager\\AppConstraints\\Constraint->addStateConstraint'
            constraints:
              cancled:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:filter.state'
                provider: 'AndreasSteiger\\EventManager\\AppController\\DataProvider->getLastMonth'
          creator: true
          creationDate: true
          category: true



  result:
    type: 'show'
    settings:
      defaultView: 'list'
      views:
        list:
          templateFile: 'EXT:event_manager/Resources/Private/Partials/Apps/EventApp/Result/List.html'
          iconFile: 'EXT:event_manager/Resources/Public/Icons/Apps/EventApp/List.svg'
          sourceTableName: 'tx_eventmanager_domain_model_event'
          columns:
            allowed: 'all'
            default:
              - title
              - city
              - location
              - startDate
              - countdown
              - duration
            #fixed:
            #  - title
            computed:
              countdown:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:result.computeColumn.countdown'
                type: 'datetime'
                provider: 'AndreasSteiger\\EventManager\\AppController\\DataProvider->getDatePeriodUntilStartDate'
              duration:
                label: 'EXT:event_manager/Resources/Language/EventApp.xlf:computedColumn.duration'
                type: 'datetime'
                provider: 'AndreasSteiger\\EventManager\\AppController\\DataProvider->getDatePeriodUntilStartDate'
          behavior:
            allowMassAction: false
            allowColumnSelection: false
            maximumColumns: 20
            maximumElementsPerPage: 25
            usePresetsComponent: true

        calendar: true
        # settings: usePresetsComponent?

        tiles: true

        coverFlow: false